version: "3.9"  # Версия схемы docker-compose

services:  # Описание всех сервисов
  bot:  # Название сервиса для бота
    build: .  # Сборка образа из текущей директории с Dockerfile
    container_name: nechaevka_bot  # Явное имя контейнера для удобства
    env_file:  # Подключаем файл окружения
      - .env  # Используем локальный .env с токеном и ID сообщества
    environment:  # Переменные окружения по умолчанию
      EVENT_DB: /app/data/logs.db  # Принудительно кладем базу логов в общую папку data
    ports:  # Пробрасываем порты наружу
      - "8000:8000"  # Локальный порт:внутренний порт приложения
    volumes:  # Подключаем тома
      - ./data:/app/data  # Шарим папку data с базой логов на хост
    restart: unless-stopped  # Автоматический перезапуск, кроме явной остановки
