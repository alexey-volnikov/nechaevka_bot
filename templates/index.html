<!doctype html> <!-- –û–±—ä—è–≤–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
<html lang="ru"> <!-- –£–∫–∞–∑—ã–≤–∞–µ–º —è–∑—ã–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
<head> <!-- –ù–∞—á–∞–ª–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
  <meta charset="UTF-8" /> <!-- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8 –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä—É—Å—Å–∫–æ–≥–æ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
  <title>VK Bot Dashboard</title> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∫–ª–∞–¥–∫–∏ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" /> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Bootstrap -->
  <link rel="preconnect" href="https://fonts.googleapis.com" /> <!-- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É —à—Ä–∏—Ñ—Ç–∞ -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /> <!-- –†–∞–∑—Ä–µ—à–∞–µ–º –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —à—Ä–∏—Ñ—Ç–∞ -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" /> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —à—Ä–∏—Ñ—Ç Inter -->
  <style> /* –ù–∞—á–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç–∏–ª–µ–π */
    body { background: #0f172a; color: #e2e8f0; font-family: "Inter", system-ui, -apple-system, sans-serif; } /* –§–æ–Ω –∏ —Ç–µ–∫—Å—Ç */
    .glass { background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 18px; backdrop-filter: blur(10px); } /* –°—Ç–∏–ª—å —Å—Ç–µ–∫–ª–∞ */
    .hero { background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.1), transparent 35%), radial-gradient(circle at 80% 0%, rgba(94, 234, 212, 0.08), transparent 30%); } /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≥–µ—Ä–æ—è */
    .badge-soft { background: rgba(99, 102, 241, 0.15); color: #c7d2fe; border: 1px solid rgba(99, 102, 241, 0.35); } /* –ú—è–≥–∫–∏–π –±–µ–π–¥–∂ */
    .metric { font-size: 32px; font-weight: 700; } /* –†–∞–∑–º–µ—Ä —Ü–∏—Ñ—Ä –º–µ—Ç—Ä–∏–∫ */
    .metric-sub { color: #94a3b8; font-size: 14px; } /* –ü–æ–¥–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ */
    .card-title { font-weight: 700; letter-spacing: 0.02em; } /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ */
    .table > :not(caption) > * > * { background-color: transparent; color: #e2e8f0; } /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω —Ç–∞–±–ª–∏—Ü—ã */
    .table-striped > tbody > tr:nth-of-type(odd) > * { background: rgba(255, 255, 255, 0.03); } /* –ü–æ–ª–æ—Å–∞—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ */
    .pill { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 999px; border: 1px solid rgba(148, 163, 184, 0.4); color: #cbd5e1; font-size: 13px; } /* –ü–∏–ª—é–ª–∏ —Å—Ç–∞—Ç—É—Å–∞ */
    .stat-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; } /* –¢–æ—á–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ */
    .shadow-soft { box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25); } /* –ú—è–≥–∫–∞—è —Ç–µ–Ω—å */
    .chart-card { min-height: 320px; } /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ */
    .avatar-inline { width: 1.6em; height: 1.6em; border-radius: 999px; object-fit: cover; flex-shrink: 0; } /* –ö–ª–∞—Å—Å –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –∞–≤–∞—Ç–∞—Ä–æ–∫ –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ç–µ–∫—Å—Ç–∞ */
    .attachment-pill { display: inline-flex; gap: 6px; align-items: center; padding: 4px 10px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.35); background: rgba(255, 255, 255, 0.05); color: #e2e8f0; font-size: 12px; text-decoration: none; } /* –ü–∏–ª—é–ª—è –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏—è */
    .attachment-pill:hover { text-decoration: none; background: rgba(255, 255, 255, 0.08); } /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    .attachment-photo { border-color: rgba(59, 130, 246, 0.5); color: #bfdbfe; } /* –¶–≤–µ—Ç –¥–ª—è —Ñ–æ—Ç–æ */
    .attachment-video { border-color: rgba(244, 114, 182, 0.5); color: #fbcfe8; } /* –¶–≤–µ—Ç –¥–ª—è –≤–∏–¥–µ–æ */
    .attachment-doc { border-color: rgba(74, 222, 128, 0.5); color: #bbf7d0; } /* –¶–≤–µ—Ç –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ */
    .attachment-audio { border-color: rgba(56, 189, 248, 0.5); color: #bae6fd; } /* –¶–≤–µ—Ç –¥–ª—è –∞—É–¥–∏–æ */
    .attachment-sticker { border-color: rgba(248, 180, 0, 0.6); color: #fef08a; } /* –¶–≤–µ—Ç –¥–ª—è —Å—Ç–∏–∫–µ—Ä–æ–≤ */
    .attachment-wall { border-color: rgba(236, 72, 153, 0.6); color: #fbcfe8; } /* –¶–≤–µ—Ç –¥–ª—è –ø–æ—Å—Ç–æ–≤ */
    .attachment-link { border-color: rgba(14, 165, 233, 0.5); color: #bae6fd; } /* –¶–≤–µ—Ç –¥–ª—è —Å—Å—ã–ª–æ–∫ */
    .attachment-generic { border-color: rgba(148, 163, 184, 0.5); color: #e2e8f0; } /* –¶–≤–µ—Ç –¥–ª—è –ø—Ä–æ—á–µ–≥–æ */
    .attachment-group { display: flex; flex-wrap: wrap; gap: 6px; } /* –ì—Ä—É–ø–ø–∞ –≤–ª–æ–∂–µ–Ω–∏–π */
    .copy-block { display: flex; flex-direction: column; gap: 4px; padding: 6px 10px; border-radius: 12px; border: 1px dashed rgba(148, 163, 184, 0.35); background: rgba(255, 255, 255, 0.02); } /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–ø–æ—Å—Ç–∞ */
    .copy-header { display: flex; align-items: center; gap: 6px; font-size: 12px; color: #cbd5e1; } /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ–ø–æ—Å—Ç–∞ */
    .copy-attachments { display: flex; flex-wrap: wrap; gap: 6px; } /* –ë–ª–æ–∫ –≤–ª–æ–∂–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ —Ä–µ–ø–æ—Å—Ç–∞ */
    .content-cell { display: flex; flex-direction: column; gap: 6px; } /* –Ø—á–µ–π–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
  </style> <!-- –ö–æ–Ω–µ—Ü –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç–∏–ª–µ–π -->
</head> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
<body class="pb-5"> <!-- –¢–µ–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–∏–∂–Ω–∏–º –æ—Ç—Å—Ç—É–ø–æ–º -->
  <div class="container py-4"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="p-4 p-md-5 mb-4 hero glass shadow-soft"> <!-- –ë–ª–æ–∫ –≥–µ—Ä–æ—è -->
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-3"> <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –≥–µ—Ä–æ—è -->
        <div> <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
          <div class="d-inline-flex align-items-center gap-2 mb-2"> <!-- –ë–µ–π–¥–∂–∏ —Å—Ç–∞—Ç—É—Å–∞ -->
            <span class="pill"> <!-- –ü–∏–ª—é–ª—è —Å—Ç–∞—Ç—É—Å–∞ -->
              <span class="stat-dot bg-info"></span> <!-- –¢–æ—á–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è -->
              –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω <!-- –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞ -->
            </span> <!-- –ö–æ–Ω–µ—Ü –ø–∏–ª—é–ª–∏ -->
            <span class="pill" id="demo-badge" style="display: none;"> <!-- –ü–∏–ª—é–ª—è –¥–µ–º–æ -->
              <span class="stat-dot bg-warning"></span> <!-- –¢–æ—á–∫–∞ –¥–µ–º–æ -->
              –î–µ–º–æ-—Ä–µ–∂–∏–º <!-- –ü–æ–¥–ø–∏—Å—å –¥–µ–º–æ -->
            </span> <!-- –ö–æ–Ω–µ—Ü –ø–∏–ª—é–ª–∏ –¥–µ–º–æ -->
          </div> <!-- –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –±–µ–π–¥–∂–µ–π -->
          <h1 class="fw-bold mb-2">–î–∞—à–±–æ—Ä–¥ VK-–±–æ—Ç–∞</h1> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–µ—Ä–æ—è -->
          <p class="text-secondary mb-0">–ñ–∏–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ª–æ–Ω–≥–ø—É–ª–ª–∞, –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç –ª–∏—Ü–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p> <!-- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ -->
        <div class="text-end"> <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
          <div class="card glass shadow-soft px-4 py-3"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
            <div class="text-secondary small">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
            <div class="fw-semibold text-light" id="group-name">‚Äî</div> <!-- –ò–º—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Å –±–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–º —Ü–≤–µ—Ç–æ–º -->
            <div class="text-secondary small" id="group-id">‚Äî</div> <!-- ID –∏–ª–∏ –∞–¥—Ä–µ—Å -->
            <div class="text-secondary small" id="group-members">‚Äî</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
          </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –≤–µ—Ä—Ö–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ –≥–µ—Ä–æ—è -->
    </div> <!-- –ö–æ–Ω–µ—Ü –≥–µ—Ä–æ—è -->

    <div class="glass shadow-soft p-4 mb-4"> <!-- –ë–ª–æ–∫ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-3"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
        <div> <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å –±–ª–æ–∫–∞ -->
          <div class="card-title mb-1" data-bs-toggle="tooltip" title="–ó–¥–µ—Å—å –ø–æ—è–≤–ª—è—é—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Ç —Å–µ—Ä–≤–∏—Å–∞">–í–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
          <div class="text-secondary small">–û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ -->
        <div class="d-flex align-items-center gap-2"> <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
          <span id="important-badge" class="badge bg-danger fs-6">0</span> <!-- –ë–µ–π–¥–∂ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ -->
          <a href="/logs/full#service-alerts" class="btn btn-outline-light btn-sm">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º</a> <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->
    </div> <!-- –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->

    <div class="glass shadow-soft p-4 mb-4"> <!-- –ë–ª–æ–∫ –≤—ã–±–æ—Ä–∞ —á–∞—Ç–∞ -->
      <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div> <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
          <div class="card-title mb-1" data-bs-toggle="tooltip" title="–ù–∞—Å—Ç—Ä–æ–π—Ç–µ, –∏–∑ –∫–∞–∫–∏—Ö —á–∞—Ç–æ–≤ –ø–æ–ª—É—á–∞—Ç—å –ª–æ–≥–∏">–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö</div> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
          <div class="text-secondary small">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π peer_id –∏–ª–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ä–∞–∑—É –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è.</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ -->
        <div class="d-flex flex-column flex-md-row gap-2 align-items-md-center"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ -->
          <label class="text-secondary small mb-0" for="peer-select">–§–∏–ª—å—Ç—Ä –ø–æ —á–∞—Ç—É</label> <!-- –ü–æ–¥–ø–∏—Å—å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ -->
          <select id="peer-select" class="form-select bg-dark text-light border-secondary" style="min-width: 240px"> <!-- –°–µ–ª–µ–∫—Ç–æ—Ä —á–∞—Ç–æ–≤ -->
            <option value="">–í—Å–µ —á–∞—Ç—ã</option> <!-- –û–ø—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
          </select> <!-- –ö–æ–Ω–µ—Ü —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->
    </div> <!-- –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –≤—ã–±–æ—Ä–∞ —á–∞—Ç–∞ -->

    <div class="glass shadow-soft p-4 mb-4"> <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã -->
      <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div> <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
          <div class="card-title mb-1" data-bs-toggle="tooltip" title="–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –∫—É–¥–∞ –ø–∏—à—É—Ç—Å—è –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –±–æ—Ç–∞">–§–∞–π–ª –ª–æ–≥–æ–≤ —Å–æ–±—ã—Ç–∏–π</div> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
          <div class="text-secondary small">–§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–±—ã—Ç–∏–∏.</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ -->
        <div class="text-secondary small"> <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
          <div><span class="text-light">–ü—É—Ç—å:</span> <span id="storage-path">‚Äî</span></div> <!-- –°—Ç—Ä–æ–∫–∞ –ø—É—Ç–∏ -->
          <div><span class="text-light">–†–∞–∑–º–µ—Ä:</span> <span id="storage-size">‚Äî</span></div> <!-- –°—Ç—Ä–æ–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ -->
          <div><span class="text-light">–°—Ç–∞—Ç—É—Å:</span> <span id="storage-status">‚Äî</span></div> <!-- –°—Ç—Ä–æ–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->
    </div> <!-- –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã -->

    <div class="row g-4 mb-4"> <!-- –°—Ç—Ä–æ–∫–∞ –º–µ—Ç—Ä–∏–∫ -->
      <div class="col-12 col-md-3"> <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å–æ–±—ã—Ç–∏–π -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
            <div class="d-flex justify-content-between align-items-center mb-2"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
              <div class="card-title" data-bs-toggle="tooltip" title="–°–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏–Ω—è—Ç–æ —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞">–°–æ–±—ã—Ç–∏—è</div> <!-- –¢–µ–∫—Å—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
              <span class="badge-soft badge rounded-pill">Live</span> <!-- –ë–µ–π–¥–∂ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <div class="metric" id="events-count">0</div> <!-- –ß–∏—Å–ª–æ —Å–æ–±—ã—Ç–∏–π -->
          <div class="metric-sub">–í—Å–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–æ</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
      <div class="col-12 col-md-3"> <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
            <div class="d-flex justify-content-between align-items-center mb-2"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
              <div class="card-title" data-bs-toggle="tooltip" title="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π">–°–æ–æ–±—â–µ–Ω–∏—è</div> <!-- –¢–µ–∫—Å—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
              <span class="badge bg-info text-dark">–í—Ö–æ–¥—è—â–∏–µ</span> <!-- –ë–µ–π–¥–∂ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <div class="metric" id="messages-count">0</div> <!-- –ß–∏—Å–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π -->
          <div class="metric-sub">–ù–æ–≤—ã–µ –∑–∞ —Å–µ—Å—Å–∏—é</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
      <div class="col-12 col-md-3"> <!-- –ö–æ–ª–æ–Ω–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
            <div class="d-flex justify-content-between align-items-center mb-2"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
              <div class="card-title" data-bs-toggle="tooltip" title="–°–∫–æ–ª—å–∫–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –∏ –≤—ã—Ö–æ–¥–æ–≤ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ">–£—á–∞—Å—Ç–Ω–∏–∫–∏</div> <!-- –¢–µ–∫—Å—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
              <span class="badge bg-success">–ß–∞—Ç—ã</span> <!-- –ë–µ–π–¥–∂ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <div class="metric" id="invites-count">0</div> <!-- –ß–∏—Å–ª–æ —Å–æ–±—ã—Ç–∏–π -->
          <div class="metric-sub">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è / —É–¥–∞–ª–µ–Ω–∏—è</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
      <div class="col-12 col-md-3"> <!-- –ö–æ–ª–æ–Ω–∫–∞ –æ—à–∏–±–æ–∫ -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
            <div class="d-flex justify-content-between align-items-center mb-2"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
              <div class="card-title" data-bs-toggle="tooltip" title="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ª–æ–Ω–≥–ø—É–ª–ª–∞">–û—à–∏–±–∫–∏</div> <!-- –¢–µ–∫—Å—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
              <span class="badge bg-danger">–õ–æ–≥</span> <!-- –ë–µ–π–¥–∂ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <div class="metric" id="errors-count">0</div> <!-- –ß–∏—Å–ª–æ –æ—à–∏–±–æ–∫ -->
          <div class="metric-sub">–ò—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–Ω–≥–ø—É–ª–ª–∞</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
    </div> <!-- –ö–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏ –º–µ—Ç—Ä–∏–∫ -->

    <div class="row g-4"> <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ -->
      <div class="col-12 col-lg-5"> <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º (–Ω–æ–≤–∞—è –ø—Ä–æ–ø–æ—Ä—Ü–∏—è) -->
        <div class="glass p-4 shadow-soft chart-card"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞ -->
          <div class="d-flex justify-content-between align-items-center mb-3"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞ -->
            <div>
              <div class="card-title mb-1" data-bs-toggle="tooltip" title="–ì—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π">–î–∏–Ω–∞–º–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π</div> <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
              <div class="text-secondary small">–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã</div> <!-- –ü–æ–¥–ø–∏—Å—å -->
            </div>
            <div class="d-flex align-items-center gap-2"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ -->
              <select class="form-select form-select-sm bg-dark text-light" id="time-range-select"> <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ -->
                <option value="15">15 –º–∏–Ω—É—Ç</option> <!-- –û–ø—Ü–∏—è 15 –º–∏–Ω—É—Ç -->
                <option value="60">1 —á–∞—Å</option> <!-- –û–ø—Ü–∏—è 1 —á–∞—Å -->
                <option value="360">6 —á–∞—Å–æ–≤</option> <!-- –û–ø—Ü–∏—è 6 —á–∞—Å–æ–≤ -->
                <option value="1440">24 —á–∞—Å–∞</option> <!-- –û–ø—Ü–∏—è 24 —á–∞—Å–∞ -->
              </select> <!-- –ö–æ–Ω–µ—Ü —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ -->
              <span class="pill"> <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –ª–æ–Ω–≥–ø—É–ª–ª–∞ -->
                <span class="stat-dot bg-info"></span> <!-- –¢–æ—á–∫–∞ -->
                –õ–æ–Ω–≥–ø—É–ª–ª –∞–∫—Ç–∏–≤–µ–Ω <!-- –ü–æ–¥–ø–∏—Å—å -->
              </span> <!-- –ö–æ–Ω–µ—Ü –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->
          </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
          <canvas id="events-chart" height="260"></canvas> <!-- –ü–æ–ª–æ—Ç–Ω–æ –≥—Ä–∞—Ñ–∏–∫–∞ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞ -->
      <div class="col-12 col-lg-7"> <!-- –ö–æ–ª–æ–Ω–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–æ–≤–∞—è –ø—Ä–æ–ø–æ—Ä—Ü–∏—è) -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="d-flex justify-content-between align-items-center mb-3"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
              <div>
                <div class="card-title mb-1" data-bs-toggle="tooltip" title="–°–≤–µ–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div> <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
                <div class="text-secondary small">–ù–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏</div> <!-- –ü–æ–¥–ø–∏—Å—å —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ -->
              </div>
            <div class="d-flex align-items-center gap-2"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–Ω–æ–ø–æ–∫ -->
              <span class="badge-soft badge rounded-pill" id="timezone-badge" title="">–õ–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è</span> <!-- –ë–µ–π–¥–∂ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –æ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ -->
              <span class="badge-soft badge rounded-pill">READ ONLY</span> <!-- –ë–µ–π–¥–∂ readonly -->
              <a href="/logs/full" class="btn btn-outline-light btn-sm"> <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ <!-- –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ -->
              </a> <!-- –ö–æ–Ω–µ—Ü –∫–Ω–æ–ø–∫–∏ -->
            </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–Ω–æ–ø–æ–∫ -->
          </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
          <div class="table-responsive"> <!-- –û–±–µ—Ä—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã -->
            <table class="table table-sm table-striped align-middle mb-0"> <!-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
              <thead class="text-secondary"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã -->
                <tr>
                  <th>–ß–∞—Ç</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ -->
                  <th>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ -->
                  <th>–ë–æ—Ç?</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –±–æ—Ç–∞ -->
                  <th>–û—Ç–≤–µ—Ç</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ -->
                  <th>–í–ª–æ–∂–µ–Ω–∏—è</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ -->
                  <th>–¢–µ–∫—Å—Ç</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞ -->
                </tr>
              </thead>
              <tbody id="messages-body"> <!-- –¢–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã -->
                <tr>
                  <td colspan="6" class="text-secondary">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td> <!-- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä -->
                </tr>
              </tbody>
            </table> <!-- –ö–æ–Ω–µ—Ü —Ç–∞–±–ª–∏—Ü—ã -->
          </div> <!-- –ö–æ–Ω–µ—Ü –æ–±–µ—Ä—Ç–∫–∏ —Ç–∞–±–ª–∏—Ü—ã -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    </div> <!-- –ö–æ–Ω–µ—Ü –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ç–∫–∏ -->

    <div class="row g-4 mt-4"> <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ -->
      <div class="col-12 col-xl-6"> <!-- –ö–æ–ª–æ–Ω–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ -->
          <div class="d-flex justify-content-between align-items-center mb-3"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="card-title mb-1" data-bs-toggle="tooltip" title="–°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–æ—Ç—É">–î–∏–∞–ª–æ–≥–∏ –∏ —á–∞—Ç—ã</div> <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
            <span class="badge bg-secondary">Read-only</span> <!-- –ë–µ–π–¥–∂ -->
          </div> <!-- –ö–æ–Ω–µ—Ü –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
          <div class="table-responsive"> <!-- –û–±–µ—Ä—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã -->
            <table class="table table-striped align-middle mb-0"> <!-- –¢–∞–±–ª–∏—Ü–∞ –¥–∏–∞–ª–æ–≥–æ–≤ -->
              <thead class="text-secondary"> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                <tr>
                  <th>peer_id</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —á–∞—Ç–∞ -->
                  <th>–¢–∏–ø</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∏–ø–∞ –¥–∏–∞–ª–æ–≥–∞ -->
                  <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏—è —á–∞—Ç–∞ -->
                  <th>–°–æ–æ–±—â–µ–Ω–∏–π</th> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
                </tr>
              </thead>
              <tbody id="conversations-body"> <!-- –¢–µ–ª–æ -->
                <tr>
                  <td colspan="4" class="text-secondary">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td> <!-- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä -->
                </tr>
              </tbody>
            </table> <!-- –ö–æ–Ω–µ—Ü —Ç–∞–±–ª–∏—Ü—ã -->
          </div> <!-- –ö–æ–Ω–µ—Ü –æ–±–µ—Ä—Ç–∫–∏ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
      <div class="col-12 col-xl-6"> <!-- –ö–æ–ª–æ–Ω–∫–∞ –∑–∞–º–µ—Ç–æ–∫ -->
        <div class="glass p-4 shadow-soft h-100"> <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–º–µ—Ç–æ–∫ -->
          <div class="card-title mb-3" data-bs-toggle="tooltip" title="–ö—Ä–∞—Ç–∫–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –±–æ—Ç–æ–º">–ü–∞–º—è—Ç–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</div> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
          <ul class="text-secondary small mb-0"> <!-- –°–ø–∏—Å–æ–∫ -->
            <li>–¢–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `.env`, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –∏ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</li> <!-- –ü—É–Ω–∫—Ç -->
            <li>–ë–æ—Ç —á–∏—Ç–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è, –Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö.</li> <!-- –ü—É–Ω–∫—Ç -->
            <li>–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –¥–µ–º–æ-—Ä–µ–∂–∏–º (`DEMO_MODE=1`), –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤.</li> <!-- –ü—É–Ω–∫—Ç -->
            <li>–î–ª—è live —Ä–µ–∂–∏–º–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –∏–∑ `.env` –æ—Ç–∫—Ä—ã—Ç –≤ Windows –∏–ª–∏ WSL.</li> <!-- –ü—É–Ω–∫—Ç -->
          </ul> <!-- –ö–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞ -->
        </div> <!-- –ö–æ–Ω–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ -->
    </div> <!-- –ö–æ–Ω–µ—Ü –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏ -->
  </div> <!-- –ö–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Bootstrap JS –¥–ª—è —Ç—É–ª—Ç–∏–ø–æ–≤ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Chart.js -->
  <script> // –ù–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞
    const initialStats = {{ initial_stats|tojson }}; // –ß–∏—Ç–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–∞–≤—ã—á–∫–∞—Ö
    const initialGroup = {{ initial_group|tojson }}; // –ß–∏—Ç–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –≤–∏–¥–µ
    const initialConversations = {{ initial_conversations|tojson }}; // –ß–∏—Ç–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –±–µ–∑ —Ä–∏—Å–∫–∞ –∏—Å–ø–æ—Ä—Ç–∏—Ç—å JSON
    const initialPeers = {{ initial_peers|tojson }}; // –ß–∏—Ç–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ peer_id –±–µ–∑ –æ—à–∏–±–æ–∫ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    const initialStorage = {{ initial_storage|tojson }}; // –ß–∏—Ç–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã
    const demoMode = {{ 'true' if demo_mode else 'false' }}; // –§–ª–∞–≥ –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞

    const eventsEl = document.getElementById('events-count'); // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏–π
    const messagesEl = document.getElementById('messages-count'); // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
    const invitesEl = document.getElementById('invites-count'); // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
    const errorsEl = document.getElementById('errors-count'); // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç –æ—à–∏–±–æ–∫
    const messagesBody = document.getElementById('messages-body'); // –¢–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–æ–±—â–µ–Ω–∏–π
    const conversationsBody = document.getElementById('conversations-body'); // –¢–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã –¥–∏–∞–ª–æ–≥–æ–≤
    const groupNameEl = document.getElementById('group-name'); // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
    const groupIdEl = document.getElementById('group-id'); // ID —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
    const groupMembersEl = document.getElementById('group-members'); // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    const demoBadge = document.getElementById('demo-badge'); // –ë–µ–π–¥–∂ –¥–µ–º–æ
    const peerSelect = document.getElementById('peer-select'); // –°–µ–ª–µ–∫—Ç–æ—Ä —á–∞—Ç–æ–≤
    const storagePathEl = document.getElementById('storage-path'); // –ü—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –±–∞–∑—ã
    const storageSizeEl = document.getElementById('storage-size'); // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –±–∞–∑—ã
    const storageStatusEl = document.getElementById('storage-status'); // –°—Ç–∞—Ç—É—Å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    const importantBadge = document.getElementById('important-badge'); // –ë–µ–π–¥–∂ –≤–∞–∂–Ω—ã—Ö –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
    const timeRangeSelect = document.getElementById('time-range-select'); // –°–µ–ª–µ–∫—Ç–æ—Ä –≤—ã–±–æ—Ä–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏
    let currentPeer = ''; // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π peer_id
    let selectedRange = Number(initialStats?.range_minutes ?? 60); // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –º–∏–Ω—É—Ç

    const timezoneInfo = Intl.DateTimeFormat().resolvedOptions(); // –°—á–∏—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Ç–∞–π–º–∑–æ–Ω—ã –±—Ä–∞—É–∑–µ—Ä–∞
    const timezoneOffsetMinutes = new Date().getTimezoneOffset(); // –ü–æ–ª—É—á–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç UTC –≤ –º–∏–Ω—É—Ç–∞—Ö
    const timezoneOffsetSign = timezoneOffsetMinutes <= 0 ? '+' : '-'; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞–∫ —Å–º–µ—â–µ–Ω–∏—è
    const timezoneOffsetHours = String(Math.floor(Math.abs(timezoneOffsetMinutes) / 60)).padStart(2, '0'); // –í—ã—á–∏—Å–ª—è–µ–º —á–∞—Å—ã —Å–º–µ—â–µ–Ω–∏—è —Å –≤–µ–¥—É—â–∏–º –Ω—É–ª–µ–º
    const timezoneOffsetRestMinutes = String(Math.abs(timezoneOffsetMinutes) % 60).padStart(2, '0'); // –í—ã—á–∏—Å–ª—è–µ–º –º–∏–Ω—É—Ç—ã —Å–º–µ—â–µ–Ω–∏—è —Å –≤–µ–¥—É—â–∏–º –Ω—É–ª–µ–º
    const timezoneLabel = `UTC${timezoneOffsetSign}${timezoneOffsetHours}:${timezoneOffsetRestMinutes} (${timezoneInfo.timeZone || '–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è'})`; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å —Ç–∞–π–º–∑–æ–Ω—ã –∏ —Å–º–µ—â–µ–Ω–∏—è
    const timeFormatter = new Intl.DateTimeFormat(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: timezoneInfo.timeZone, timeZoneName: 'short' }); // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏

    document.getElementById('timezone-badge').title = `–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—Ä–µ–º—è ${timezoneLabel}`; // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –±–µ–π–¥–∂–∞ —Ç–∞–π–º–∑–æ–Ω—ã

    const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')); // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—É–ª—Ç–∏–ø—ã
    tooltipTriggerList.forEach((triggerEl) => new bootstrap.Tooltip(triggerEl)); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Bootstrap —Ç—É–ª—Ç–∏–ø—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

    if (timeRangeSelect) { // –ï—Å–ª–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω
      timeRangeSelect.value = String(selectedRange); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      timeRangeSelect.addEventListener('change', () => { // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
        selectedRange = Number(timeRangeSelect.value || 60); // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
        poll(); // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
      }); // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞

    function formatDateTime(value) { // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
      const parsed = value ? new Date(value) : null; // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–∞—Ç—ã –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è
      return parsed && !Number.isNaN(parsed.valueOf()) ? timeFormatter.format(parsed) : '‚Äî'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Ç–∏—Ä–µ
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

    if (demoMode) { // –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –¥–µ–º–æ-—Ä–µ–∂–∏–º
      demoBadge.style.display = 'inline-flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ –¥–µ–º–æ
    } // –ö–æ–Ω–µ—Ü —É—Å–ª–æ–≤–∏—è –¥–µ–º–æ

    const ctx = document.getElementById('events-chart'); // –ü–æ–ª—É—á–∞–µ–º —Ö–æ–ª—Å—Ç –≥—Ä–∞—Ñ–∏–∫–∞
    const chart = new Chart(ctx, { // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫
      type: 'line', // –¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞
      data: { // –î–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∞
        labels: initialStats.timeline.map((p) => formatDateTime(p.time)), // –ú–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
        datasets: [ // –ù–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
          { label: '–°–æ–±—ã—Ç–∏—è', data: initialStats.timeline.map((p) => p.events), borderColor: '#60a5fa', backgroundColor: 'rgba(96,165,250,0.25)', tension: 0.3, fill: true }, // –õ–∏–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
          { label: '–°–æ–æ–±—â–µ–Ω–∏—è', data: initialStats.timeline.map((p) => p.messages), borderColor: '#34d399', backgroundColor: 'rgba(52,211,153,0.25)', tension: 0.3, fill: true }, // –õ–∏–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
          { label: '–£—á–∞—Å—Ç–Ω–∏–∫–∏', data: initialStats.timeline.map((p) => p.invites), borderColor: '#fbbf24', backgroundColor: 'rgba(251,191,36,0.25)', tension: 0.3, fill: true }, // –õ–∏–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
        ], // –ö–æ–Ω–µ—Ü –Ω–∞–±–æ—Ä–æ–≤
      }, // –ö–æ–Ω–µ—Ü –¥–∞–Ω–Ω—ã—Ö
      options: { // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞
        plugins: { legend: { labels: { color: '#cbd5e1' } } }, // –¶–≤–µ—Ç –ª–µ–≥–µ–Ω–¥—ã
        scales: { // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–µ–π
          x: { ticks: { color: '#cbd5e1' }, grid: { color: 'rgba(255,255,255,0.04)' } }, // –û—Å—å X
          y: { ticks: { color: '#cbd5e1' }, grid: { color: 'rgba(255,255,255,0.04)' } }, // –û—Å—å Y
        }, // –ö–æ–Ω–µ—Ü –æ—Å–µ–π
      }, // –ö–æ–Ω–µ—Ü –Ω–∞—Å—Ç—Ä–æ–µ–∫
    }); // –ö–æ–Ω–µ—Ü —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞

    function renderGroup(data) { // –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ
      groupNameEl.textContent = data.name || '‚Äî'; // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
      groupIdEl.textContent = data.screen_name ? `vk.com/${data.screen_name}` : 'ID: ' + (data.id || '‚Äî'); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∞–¥—Ä–µ—Å
      groupMembersEl.textContent = data.members_count ? `${data.members_count} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤` : '–£—á–∞—Å—Ç–Ω–∏–∫–∏: ‚Äî'; // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function buildAvatarLabel(label, avatarUrl) { // –§—É–Ω–∫—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏ —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π
      const safeLabel = label || '‚Äî'; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥–ø–∏—Å—å, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç
      if (avatarUrl) { // –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä
        return `<span class="d-inline-flex align-items-center gap-2"><img src="${avatarUrl}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-inline" loading="lazy" /> <span>${safeLabel}</span></span>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–¥–ø–∏—Å—å —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞
      return safeLabel; // –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏

    function buildReplyPreview(reply, peerId) { // –§—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∫–∏ —è—á–µ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞
      if (!reply || (!reply.id && !reply.text && !reply.from_id)) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        return '<span class="text-secondary">‚Äî</span>'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—Ç–≤–µ—Ç–∞
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –æ—Ç–≤–µ—Ç–∞
      const replyId = reply.id ?? '‚Äî'; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º ID –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
      const replyText = reply.text ? reply.text.slice(0, 120) : '–ë–µ–∑ —Ç–µ–∫—Å—Ç–∞'; // –ì–æ—Ç–æ–≤–∏–º –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞
      const replyAuthorLabel = reply.from_name ? `${reply.from_name} (ID: ${reply.from_id ?? '‚Äî'})` : reply.from_id ? `ID: ${reply.from_id}` : '–ê–≤—Ç–æ—Ä –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞
      const replyAuthorCell = buildAvatarLabel(replyAuthorLabel, reply.from_avatar); // –ì–æ—Ç–æ–≤–∏–º –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π
      const replyLink = reply.id && peerId ? `<a href="https://vk.com/im?sel=${peerId}&msgid=${reply.id}" target="_blank" rel="noopener noreferrer">#${reply.id}</a>` : `#${replyId}`; // –°–æ–±–∏—Ä–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      const replyAttachmentsCount = Array.isArray(reply.attachments) ? reply.attachments.length : 0; // –°—á–∏—Ç–∞–µ–º –≤–ª–æ–∂–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
      const replyAttachmentsLabel = replyAttachmentsCount ? `${replyAttachmentsCount} –≤–ª–æ–∂.` : '–ë–µ–∑ –≤–ª–æ–∂–µ–Ω–∏–π'; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å –≤–ª–æ–∂–µ–Ω–∏–π
      return `<div class="d-flex flex-column gap-1"><div class="d-flex align-items-center gap-2">${replyLink}<span class="text-secondary small">${replyAttachmentsLabel}</span></div><div class="text-secondary small">${replyText}</div><div class="text-secondary small">${replyAuthorCell}</div></div>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º HTML —è—á–µ–π–∫–∏
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞

    const attachmentTypeLabels = { photo: '–§–æ—Ç–æ', video: '–í–∏–¥–µ–æ', doc: '–î–æ–∫—É–º–µ–Ω—Ç', audio_message: '–ì–æ–ª–æ—Å', audio: '–ê—É–¥–∏–æ', link: '–°—Å—ã–ª–∫–∞', sticker: '–°—Ç–∏–∫–µ—Ä', wall: '–ü–æ—Å—Ç', wall_reply: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π', market: '–¢–æ–≤–∞—Ä', gift: '–ü–æ–¥–∞—Ä–æ–∫', story: '–ò—Å—Ç–æ—Ä–∏—è', graffiti: '–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏', podcast: '–ü–æ–¥–∫–∞—Å—Ç', share: '–†–µ–ø–æ—Å—Ç', file: '–§–∞–π–ª' }; // –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ –ø–æ–¥–ø–∏—Å–∏ —Ç–∏–ø–æ–≤ –≤–ª–æ–∂–µ–Ω–∏–π
    const attachmentTypeClasses = { photo: 'attachment-photo', video: 'attachment-video', doc: 'attachment-doc', audio: 'attachment-audio', audio_message: 'attachment-audio', link: 'attachment-link', wall: 'attachment-wall', wall_reply: 'attachment-wall', sticker: 'attachment-sticker', default: 'attachment-generic' }; // –ö–ª–∞—Å—Å—ã –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤

    function normalizeAttachmentLink(att) { // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–ª–æ–∂–µ–Ω–∏–µ
      if (!att || typeof att !== 'object') { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞
        return null; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      return att.public_url || att.download_url || att.url || null; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ null
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function pickAttachmentClass(type) { // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ CSS-–∫–ª–∞—Å—Å–∞ –¥–ª—è —Ç–∏–ø–∞
      if (!type) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–∏–ø–∞
        return attachmentTypeClasses.default; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞—Å—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      return attachmentTypeClasses[type] || attachmentTypeClasses.default; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–ª–∞—Å—Å –∏–ª–∏ –∑–∞–ø–∞—Å–Ω–æ–π
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function buildAttachmentBadge(att) { // –§—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∫–∏ HTML –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–∏—è
      const type = att?.type || 'file'; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≤–ª–æ–∂–µ–Ω–∏—è
      const readableType = attachmentTypeLabels[type] || type; // –ü–æ–ª—É—á–∞–µ–º –ø–æ–¥–ø–∏—Å—å —Ç–∏–ø–∞
      const href = normalizeAttachmentLink(att); // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
      const caption = att?.title || att?.name || att?.doc?.title || att?.link?.title || att?.photo?.text || att?.description || ''; // –ü–æ–¥–±–∏—Ä–∞–µ–º –ø–æ–¥–ø–∏—Å—å
      const shortCaption = caption ? caption.slice(0, 60) : ''; // –û–±—Ä–µ–∑–∞–µ–º –ø–æ–¥–ø–∏—Å—å –¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤
      const className = pickAttachmentClass(type); // –í—ã–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
      const text = shortCaption ? `${readableType}: ${shortCaption}` : readableType; // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –±–µ–π–¥–∂–∞
      if (href) { // –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
        return `<a class="attachment-pill ${className}" href="${href}" target="_blank" rel="noopener noreferrer">${text}</a>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π –±–µ–π–¥–∂
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      return `<span class="attachment-pill ${className}">${text}</span>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ç–∏—á–Ω—ã–π –±–µ–π–¥–∂, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ—Ç
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderAttachmentList(list) { // –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ –≥—Ä—É–ø–ø—ã –≤–ª–æ–∂–µ–Ω–∏–π
      if (!Array.isArray(list) || !list.length) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π
        return '<span class="text-secondary small">–ù–µ—Ç –≤–ª–æ–∂–µ–Ω–∏–π</span>'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      const badges = list.map((att) => buildAttachmentBadge(att)).join(''); // –°–æ–±–∏—Ä–∞–µ–º –±–µ–π–¥–∂–∏
      return `<div class="attachment-group">${badges}</div>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderCopyHistory(copyHistory) { // –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ —Ä–µ–ø–æ—Å—Ç–æ–≤ –∏ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
      if (!Array.isArray(copyHistory) || !copyHistory.length) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ä–µ–ø–æ—Å—Ç–æ–≤
        return ''; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      const blocks = copyHistory.map((entry) => { // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —Ä–µ–ø–æ—Å—Ç—ã
        const source = entry.from_name ? `${entry.from_name} (ID: ${entry.from_id ?? '‚Äî'})` : `ID: ${entry.from_id ?? '‚Äî'}`; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å –∏—Å—Ç–æ—á–Ω–∏–∫–∞
        const text = entry.text ? entry.text.slice(0, 120) : '–ë–µ–∑ —Ç–µ–∫—Å—Ç–∞'; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞
        const attachmentsBlock = renderAttachmentList(entry.attachments || []); // –†–∏—Å—É–µ–º –≤–ª–æ–∂–µ–Ω–∏—è —Ä–µ–ø–æ—Å—Ç–∞
        return `<div class="copy-block"><div class="copy-header">üîÅ –†–µ–ø–æ—Å—Ç –æ—Ç ${source}</div><div class="text-secondary small">${text}</div><div class="copy-attachments">${attachmentsBlock}</div></div>`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–ª–æ–∫ —Ä–µ–ø–æ—Å—Ç–∞
      }); // –ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞
      return blocks.join(''); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function buildContentCell(attachments, copyHistory) { // –§—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∫–∏ —è—á–µ–π–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
      const hasAttachments = Array.isArray(attachments) && attachments.length > 0; // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π
      const hasCopy = Array.isArray(copyHistory) && copyHistory.length > 0; // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ä–µ–ø–æ—Å—Ç–æ–≤
      if (!hasAttachments && !hasCopy) { // –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –≤–ª–æ–∂–µ–Ω–∏–π, –Ω–∏ —Ä–µ–ø–æ—Å—Ç–æ–≤
        return '<span class="text-secondary">‚Äî</span>'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
      } // –ö–æ–Ω–µ—Ü —É—Å–ª–æ–≤–∏—è
      const attachmentsBlock = hasAttachments ? renderAttachmentList(attachments) : ''; // –ì–æ—Ç–æ–≤–∏–º –±–ª–æ–∫ –≤–ª–æ–∂–µ–Ω–∏–π
      const copyBlock = hasCopy ? renderCopyHistory(copyHistory) : ''; // –ì–æ—Ç–æ–≤–∏–º –±–ª–æ–∫ —Ä–µ–ø–æ—Å—Ç–æ–≤
      return `<div class="content-cell">${attachmentsBlock}${copyBlock}</div>`; // –°–æ–±–∏—Ä–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é —è—á–µ–π–∫—É
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderMessages(messages) { // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
      messagesBody.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã
      if (!messages.length) { // –ï—Å–ª–∏ –ø—É—Å—Ç–æ
        messagesBody.innerHTML = '<tr><td colspan="6" class="text-secondary">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td></tr>'; // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
        return; // –í—ã—Ö–æ–¥–∏–º
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç–æ—Ç—ã
      messages.forEach((msg) => { // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –ø–æ—Ä—è–¥–∫—É –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
        const row = document.createElement('tr'); // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É
        const contentCell = buildContentCell(msg.attachments, msg.copy_history); // –§–æ—Ä–º–∏—Ä—É–µ–º —è—á–µ–π–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        const botBadge = msg.is_bot ? '–î–∞' : '–ù–µ—Ç'; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∞–≤—Ç–æ—Ä –±–æ—Ç–æ–º
        const peerLabel = msg.peer_title ? `${msg.peer_title} (ID: ${msg.peer_id ?? '‚Äî'})` : `${msg.peer_id ?? '‚Äî'}`; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å —á–∞—Ç–∞
        const authorLabel = msg.from_name ? `${msg.from_name} (ID: ${msg.from_id ?? '‚Äî'})` : `${msg.from_id ?? '‚Äî'}`; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞
        const peerCell = buildAvatarLabel(peerLabel, msg.peer_avatar); // –ì–æ—Ç–æ–≤–∏–º —è—á–µ–π–∫—É —á–∞—Ç–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π
        const authorCell = buildAvatarLabel(authorLabel, msg.from_avatar); // –ì–æ—Ç–æ–≤–∏–º —è—á–µ–π–∫—É –∞–≤—Ç–æ—Ä–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π
        const replyCell = buildReplyPreview(msg.reply, msg.peer_id); // –ì–æ—Ç–æ–≤–∏–º —è—á–µ–π–∫—É –ø—Ä–µ–≤—å—é –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        row.innerHTML = `<td>${peerCell}</td><td>${authorCell}</td><td>${botBadge}</td><td>${replyCell}</td><td>${contentCell}</td><td>${msg.text ?? ''}</td>`; // –ó–∞–ø–æ–ª–Ω—è–µ–º —è—á–µ–π–∫–∏
        messagesBody.appendChild(row); // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É
      }); // –ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderPeers(peers) { // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤
      const uniquePeers = Array.from( // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —á–∞—Ç–æ–≤
        new Map( // –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ ID
          (peers || []) // –ë–µ—Ä–µ–º –≤—Ö–æ–¥–Ω—ã–µ —á–∞—Ç—ã
            .filter((p) => p && Number.isFinite(p.id)) // –£–±–∏—Ä–∞–µ–º –ø—É—Å—Ç—ã–µ –∑–∞–ø–∏—Å–∏
            .map((p) => [p.id, p]) // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
        ).values() // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è
      ); // –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–±–æ—Ä–∫—É –º–∞—Å—Å–∏–≤–∞
      peerSelect.innerHTML = '<option value="">–í—Å–µ —á–∞—Ç—ã</option>'; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫
      uniquePeers.forEach((peer) => { // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —á–∞—Ç—ã
        const option = document.createElement('option'); // –°–æ–∑–¥–∞–µ–º –æ–ø—Ü–∏—é
        option.value = peer.id; // –ó–Ω–∞—á–µ–Ω–∏–µ
        const label = peer.title ? `${peer.title} (ID: ${peer.id})` : peer.id; // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å
        option.textContent = label; // –¢–µ–∫—Å—Ç
        peerSelect.appendChild(option); // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä
      }); // –ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞
      if (currentPeer && uniquePeers.some((p) => p.id === Number(currentPeer))) { // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —á–∞—Ç –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        peerSelect.value = currentPeer; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—ã–±–æ—Ä
      } else { // –ï—Å–ª–∏ –≤—ã–±–æ—Ä–∞ –Ω–µ—Ç
        currentPeer = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä
        peerSelect.value = ''; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–ø—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      } // –ö–æ–Ω–µ—Ü —É—Å–ª–æ–≤–∏—è
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderConversations(convs) { // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤
      conversationsBody.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
      if (!convs.length) { // –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö
        conversationsBody.innerHTML = '<tr><td colspan="4" class="text-secondary">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td></tr>'; // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
        return; // –í—ã—Ö–æ–¥–∏–º
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏
      const translatedTypes = { chat: '–±–µ—Å–µ–¥–∞', user: '–¥–∏–∞–ª–æ–≥', group: '—Å–æ–æ–±—â–µ—Å—Ç–≤–æ', unknown: '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }; // –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Ç–∏–ø–æ–≤
      const sortedConvs = [...convs].sort((a, b) => { // –ö–æ–ø–∏—Ä—É–µ–º –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∏–∞–ª–æ–≥–∏
        const aHasTitle = Boolean(a?.chat_settings?.title); // –ï—Å—Ç—å –ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —É –ø–µ—Ä–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
        const bHasTitle = Boolean(b?.chat_settings?.title); // –ï—Å—Ç—å –ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —É –≤—Ç–æ—Ä–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
        if (aHasTitle !== bHasTitle) { // –ï—Å–ª–∏ —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
          return aHasTitle ? -1 : 1; // –°–Ω–∞—á–∞–ª–∞ –¥–∏–∞–ª–æ–≥–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º
        } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è
        const aCount = Number(a?.messages_count ?? 0); // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
        const bCount = Number(b?.messages_count ?? 0); // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
        return bCount - aCount; // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
      }); // –ö–æ–Ω–µ—Ü —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
      sortedConvs.forEach((conv) => { // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
        const peer = conv.peer || {}; // –ü–æ–ª—É—á–∞–µ–º peer
        const title = conv.chat_settings?.title || '‚Äî'; // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
        const type = peer.type || 'unknown'; // –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø
        const localizedType = translatedTypes[type] || translatedTypes.unknown; // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Ç–∏–ø –Ω–∞ —Ä—É—Å—Å–∫–∏–π
        const messagesCount = Number(conv.messages_count ?? 0); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
        const avatarUrl = conv.chat_settings?.photo?.photo_50 || conv.chat_settings?.photo?.photo_100 || conv.peer?.avatar; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∞–≤–∞—Ç–∞—Ä –±–µ—Å–µ–¥—ã
        const titleCell = buildAvatarLabel(title, avatarUrl); // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π
        const row = document.createElement('tr'); // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É
        row.innerHTML = `<td>${peer.id ?? '‚Äî'}</td><td>${localizedType}</td><td>${titleCell}</td><td>${messagesCount}</td>`; // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å—Ç—Ä–æ–∫—É
        conversationsBody.appendChild(row); // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É
      }); // –ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function updateMetrics(stats) { // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∏—Å–µ–ª
      eventsEl.textContent = stats.events; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
      messagesEl.textContent = stats.messages; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
      invitesEl.textContent = stats.invites; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
      errorsEl.textContent = stats.errors; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
      chart.data.labels = stats.timeline.map((p) => formatDateTime(p.time)); // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
      chart.data.datasets[0].data = stats.timeline.map((p) => p.events); // –û–±–Ω–æ–≤–ª—è–µ–º –ª–∏–Ω–∏—é —Å–æ–±—ã—Ç–∏–π
      chart.data.datasets[1].data = stats.timeline.map((p) => p.messages); // –û–±–Ω–æ–≤–ª—è–µ–º –ª–∏–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
      chart.data.datasets[2].data = stats.timeline.map((p) => p.invites); // –û–±–Ω–æ–≤–ª—è–µ–º –ª–∏–Ω–∏—é —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
      chart.update(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≥—Ä–∞—Ñ–∏–∫
      if (stats.range_minutes && timeRangeSelect) { // –ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ –µ—Å—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        selectedRange = Number(stats.range_minutes); // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
        timeRangeSelect.value = String(stats.range_minutes); // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
      } // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function renderStorage(storage) { // –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã
      storagePathEl.textContent = storage.path || '‚Äî'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞
      const sizeKb = storage.size_bytes ? Math.max(1, Math.round(storage.size_bytes / 1024)) : 0; // –ü–µ—Ä–µ–≤–æ–¥–∏–º –±–∞–π—Ç—ã –≤ –∫–∏–ª–æ–±–∞–π—Ç—ã
      storageSizeEl.textContent = storage.size_bytes ? `${sizeKb} –ö–ë` : '0 –ö–ë'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä
      storageStatusEl.textContent = storage.exists ? '–°–æ–∑–¥–∞–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω' : '–§–∞–π–ª–∞ –ø–æ–∫–∞ –Ω–µ—Ç'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
      storageStatusEl.className = storage.exists ? 'text-success' : 'text-warning'; // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Å—Ç–∞—Ç—É—Å–∞
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    function updateImportantBadge(count) { // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–π–¥–∂–∞ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
      const safeCount = Number(count) || 0; // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
      importantBadge.textContent = safeCount; // –í—ã–≤–æ–¥–∏–º —á–∏—Å–ª–æ
      importantBadge.className = safeCount > 0 ? 'badge bg-danger fs-6' : 'badge bg-secondary fs-6'; // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø–æ –Ω–∞–ª–∏—á–∏—é —Å–æ–±—ã—Ç–∏–π
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–π–¥–∂–∞

    function bootstrapPage() { // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      renderGroup(initialGroup || {}); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
      renderConversations(initialConversations || []); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥–∏
      renderPeers(initialPeers || []); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ peer_id
      updateMetrics(initialStats || { timeline: [] }); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
      renderStorage(initialStorage || {}); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã
      updateImportantBadge(0); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –±–µ–π–¥–∂ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    async function poll() { // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–æ—Å–∞
      try { // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
        const logsUrl = currentPeer ? `/api/logs?peer_id=${currentPeer}` : '/api/logs'; // –§–æ—Ä–º–∏—Ä—É–µ–º URL –ª–æ–≥–æ–≤
        const alertsUrl = '/api/service-logs?event_type=important&limit=1'; // URL –¥–ª—è –≤–∞–∂–Ω—ã—Ö –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
        const statsUrl = `/api/stats?range=${selectedRange}`; // –§–æ—Ä–º–∏—Ä—É–µ–º URL —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º
        const [statsRes, overviewRes, logsRes, alertsRes] = await Promise.all([fetch(statsUrl), fetch('/api/overview'), fetch(logsUrl), fetch(alertsUrl)]); // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –æ–±–∑–æ—Ä, –ª–æ–≥–∏ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
        const stats = await statsRes.json(); // –ß–∏—Ç–∞–µ–º JSON —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const overview = await overviewRes.json(); // –ß–∏—Ç–∞–µ–º JSON –æ–±–∑–æ—Ä–∞
        const logs = await logsRes.json(); // –ß–∏—Ç–∞–µ–º JSON –ª–æ–≥–æ–≤
        const alerts = await alertsRes.json(); // –ß–∏—Ç–∞–µ–º JSON –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
        updateMetrics(stats); // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏
        renderGroup(overview.group || {}); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ
        renderConversations(overview.conversations || []); // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–ª–æ–≥–∏
        renderPeers(overview.peers || []); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
        renderMessages(logs.items || []); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å–æ–æ–±—â–µ–Ω–∏–π
        renderStorage(overview.storage || initialStorage || {}); // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∞–π–ª–µ –±–∞–∑—ã
        updateImportantBadge(alerts.total || 0); // –û–±–Ω–æ–≤–ª—è–µ–º –±–µ–π–¥–∂ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
      } catch (err) { // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞', err); // –ü–∏—à–µ–º –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å
      } // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏
    } // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏

    peerSelect.addEventListener('change', () => { // –†–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ –≤—ã–±–æ—Ä —á–∞—Ç–∞
      currentPeer = peerSelect.value; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π peer_id
      poll(); // –ü–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    }); // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

    bootstrapPage(); // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
    poll(); // –î–µ–ª–∞–µ–º –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    setInterval(poll, 3000); // –û–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
  </script> <!-- –ö–æ–Ω–µ—Ü —Å–∫—Ä–∏–ø—Ç–∞ -->
</body> <!-- –ö–æ–Ω–µ—Ü —Ç–µ–ª–∞ -->
</html> <!-- –ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
